CREATE DATABESE shools;
USE school;

CREATE 	TABLE Students(
	ID INT AUTO_INCREMENT primary KEY,
	NAME VARCHAR(200),
	EGN VARCHAR(10)
);

CREATE TABLE H_Students(
	UID INT auto_increment PRIMARY KEY,
	EventDate DATETIME,
	EventType CHAR(1), //Update Delete
	ID INT,
	NAME VARCHAR(200),
	EGN VARCHAR(10)

);

DELIMETER $$

CREATE TRIGGER StudentsHistory_AI AFTER INSERT
ON Students FOR EACH ROW
BEGIN
	INSERT INTO H_Students VALUES(
		NULL, Now(), 'I', NEW.ID, NEW.NAME, NEW.EGN
END$$

CREATE TRIGGER StudentsHistory_AU AFTER UPDATE
ON Students FOR EACH ROW
BEGIN
	INSERT INTO H_Students VALUES(
		NULL, Now(), 'U', NEW.ID, NEW.NAME, NEW.EGN
END$$

CREATE TRIGGER StudentsHistory_AD AFTER DELETE
ON Students FOR EACH ROW
BEGIN
	INSERT INTO H_Students VALUES(
		NULL, Now(), 'D', NEW.ID, NEW.NAME, NEW.END
END$$

DELIMETE;

